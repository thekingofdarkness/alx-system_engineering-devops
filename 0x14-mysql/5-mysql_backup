#!/bin/bash

# Check if the script received the correct number of arguments
if [ $# -ne 1 ]; then
  echo "Usage: $0 <MySQL root password>"
  exit 1
fi

# Store the MySQL root password passed as an argument
MYSQL_ROOT_PASSWORD=$1

# Get the current date in the format day-month-year
DATE=$(date +%d-%m-%Y)

# Create a MySQL dump of all databases
mysqldump -u root -p"$MYSQL_ROOT_PASSWORD" --all-databases > backup.sql

# Compress the SQL dump file into a tar.gz archive with the current date as the filename
tar -czvf "$DATE.tar.gz" backup.sql

# Cleanup the uncompressed SQL dump file
rm backup.sql

echo "Backup complete: $DATE.tar.gz"